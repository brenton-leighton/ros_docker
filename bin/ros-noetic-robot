#!/usr/bin/env bash

# Assume the compose project name is the same as this script
export COMPOSE_PROJECT_NAME=${0##*/}

SCRIPT_DIR=$(dirname $(realpath "$0"))
COMPOSE_FILE_PATH=${SCRIPT_DIR}/../compose/${COMPOSE_PROJECT_NAME}-compose.yaml

# Path to a home directory on the host
export HOST_HOME_PATH=/var/tmp/${COMPOSE_PROJECT_NAME}_home

# Ensure the home directory exists on the host
mkdir -p ${HOST_HOME_PATH}/catkin_ws

docker compose --file ${COMPOSE_FILE_PATH} run --rm --user ${USER} ros ${@}
